<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudio 2: Preferencia - Laboratorio de Coherencia</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Fraunces:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <style>
        /* Estilos para experimento de elecci√≥n */
        .experimento-eleccion {
            background: linear-gradient(135deg, #E6FFF9, #F0FFF9);
            border-radius: var(--radius-3xl);
            padding: var(--space-12);
            margin: var(--space-10) 0;
            border: 4px solid var(--acento-cyan);
            position: relative;
            overflow: hidden;
        }

        .experimento-eleccion::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 229, 204, 0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        .fase-indicator {
            text-align: center;
            margin-bottom: var(--space-8);
            position: relative;
            z-index: 1;
        }

        .fase-titulo {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: var(--font-black);
            color: var(--texto-oscuro);
            margin-bottom: var(--space-4);
        }

        .fase-descripcion {
            font-size: var(--text-lg);
            color: var(--texto-medio);
        }

        /* Puertas de elecci√≥n */
        .puertas-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-10);
            margin: var(--space-10) 0;
            position: relative;
            z-index: 1;
        }

        .puerta {
            background: white;
            border-radius: var(--radius-3xl);
            padding: var(--space-12);
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-base);
            box-shadow: var(--shadow-xl);
            border: 4px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .puerta::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(255, 255, 255, 0.5));
            opacity: 0;
            transition: opacity var(--transition-base);
        }

        .puerta:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: var(--shadow-2xl);
        }

        .puerta:hover::before {
            opacity: 1;
        }

        .puerta.azul {
            border-color: #3B82F6;
        }

        .puerta.azul:hover {
            border-color: #2563EB;
            box-shadow: 0 20px 60px rgba(59, 130, 246, 0.4);
        }

        .puerta.amarilla {
            border-color: #F59E0B;
        }

        .puerta.amarilla:hover {
            border-color: #D97706;
            box-shadow: 0 20px 60px rgba(245, 158, 11, 0.4);
        }

        .puerta.forzada {
            opacity: 0.5;
            cursor: not-allowed;
            transform: scale(0.95);
        }

        .puerta.forzada:hover {
            transform: scale(0.95);
        }

        .puerta-emoji {
            font-size: 120px;
            margin: var(--space-6) 0;
            display: block;
            animation: float 3s ease-in-out infinite;
        }

        .puerta.azul .puerta-emoji {
            animation-delay: 0s;
        }

        .puerta.amarilla .puerta-emoji {
            animation-delay: 0.5s;
        }

        .puerta-label {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: var(--font-black);
            margin-top: var(--space-4);
        }

        .puerta.azul .puerta-label {
            color: #3B82F6;
        }

        .puerta.amarilla .puerta-label {
            color: #F59E0B;
        }

        .puerta-info {
            font-size: var(--text-base);
            color: var(--texto-suave);
            margin-top: var(--space-3);
            font-style: italic;
        }

        /* Mini prueba de matching */
        .mini-matching {
            background: white;
            border-radius: var(--radius-2xl);
            padding: var(--space-8);
            margin: var(--space-6) 0;
            box-shadow: var(--shadow-lg);
        }

        .mini-muestra {
            text-align: center;
            padding: var(--space-6);
            background: var(--fondo-tarjeta-suave);
            border-radius: var(--radius-xl);
            margin-bottom: var(--space-6);
        }

        .mini-muestra-emoji {
            font-size: 80px;
            display: block;
            margin: var(--space-4) 0;
        }

        .mini-muestra-label {
            font-size: var(--text-lg);
            font-weight: var(--font-bold);
            color: var(--texto-oscuro);
        }

        .mini-opciones {
            display: flex;
            gap: var(--space-4);
            justify-content: center;
        }

        .mini-opcion {
            flex: 1;
            padding: var(--space-6);
            background: var(--fondo-tarjeta-suave);
            border: 2px solid transparent;
            border-radius: var(--radius-lg);
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .mini-opcion:hover {
            border-color: var(--acento-cyan);
            background: white;
            transform: scale(1.05);
        }

        .mini-opcion-emoji {
            font-size: 48px;
            display: block;
            margin-bottom: var(--space-2);
        }

        .mini-opcion-label {
            font-size: var(--text-base);
            font-weight: var(--font-medium);
        }

        /* Contador de trials */
        .trial-progress {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin-bottom: var(--space-8);
            box-shadow: var(--shadow-md);
            position: relative;
            z-index: 1;
        }

        .trial-progress-bar {
            height: 12px;
            background: var(--fondo-tarjeta-suave);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-bottom: var(--space-3);
        }

        .trial-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--acento-cyan), var(--acento-dorado));
            border-radius: var(--radius-full);
            transition: width var(--transition-slow);
        }

        .trial-progress-text {
            text-align: center;
            font-size: var(--text-lg);
            font-weight: var(--font-bold);
            color: var(--texto-oscuro);
        }

        /* Feedback visual */
        .feedback-eleccion {
            background: linear-gradient(135deg, #FFF9E6, #FFFAEB);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin-top: var(--space-6);
            text-align: center;
            font-size: var(--text-lg);
            display: none;
            animation: fadeInUp 0.5s ease-out;
        }

        .feedback-eleccion.show {
            display: block;
        }

        /* Resultados de preferencia */
        .resultados-preferencia {
            background: white;
            border-radius: var(--radius-3xl);
            padding: var(--space-12);
            margin: var(--space-10) 0;
            box-shadow: var(--shadow-2xl);
            display: none;
        }

        .resultados-preferencia.show {
            display: block;
            animation: fadeInUp 0.8s ease-out;
        }

        .grafico-barras {
            margin: var(--space-8) 0;
        }

        .barra-container {
            margin-bottom: var(--space-6);
        }

        .barra-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-3);
            font-size: var(--text-lg);
            font-weight: var(--font-bold);
        }

        .barra-visual {
            height: 60px;
            background: var(--fondo-tarjeta-suave);
            border-radius: var(--radius-lg);
            overflow: hidden;
            position: relative;
        }

        .barra-fill {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 0 var(--space-4);
            font-size: var(--text-2xl);
            font-weight: var(--font-black);
            color: white;
            transition: width 1s ease-out;
        }

        .barra-fill.azul {
            background: linear-gradient(90deg, #3B82F6, #2563EB);
        }

        .barra-fill.amarilla {
            background: linear-gradient(90deg, #F59E0B, #D97706);
        }

        @media (max-width: 768px) {
            .puertas-container {
                grid-template-columns: 1fr;
                gap: var(--space-6);
            }

            .puerta-emoji {
                font-size: 80px;
            }

            .puerta-label {
                font-size: var(--text-2xl);
            }

            .mini-opciones {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <button class="btn-volver">
                <span>‚Üê</span>
                <span>Volver al inicio</span>
            </button>
            
            <div class="pill-progreso">
                <span class="pill-texto">Progreso del M√≥dulo</span>
                <div class="pill-barra">
                    <div class="pill-barra-fill"></div>
                </div>
                <span class="pill-texto"><strong>4/8</strong></span>
            </div>
        </header>

        <!-- Badge de m√≥dulo -->
        <div class="badge-modulo animate-fade-in delay-200">
            üö™ Estudio 2: ¬øPrefieres Tener Sentido?
        </div>

        <!-- T√≠tulo principal -->
        <h1 class="text-gradient animate-fade-in delay-300">
            ¬øElegir√≠as la Coherencia Si Pudieras?
        </h1>

        <!-- Tarjeta principal -->
        <div class="tarjeta tarjeta-principal animate-fade-in-up delay-500">
            <div class="tarjeta-icono-grande animate-float">üéØ</div>
            <h2 class="tarjeta-titulo">Ahora la Pregunta Se Pone Interesante</h2>
            
            <p class="tarjeta-texto">
                El Estudio 1 mostr√≥ que las personas <strong>responden coherentemente</strong> incluso sin 
                instrucciones. Pero eso no prueba que la coherencia sea reforzante. Tal vez simplemente es 
                un h√°bito autom√°tico.
            </p>

            <p class="tarjeta-texto">
                Para probar si la coherencia es verdaderamente reforzante, necesitas responder esta pregunta:
            </p>

            <div class="caja-info">
                <div class="caja-icono">ü§î</div>
                <div class="caja-contenido">
                    <h4>La Pregunta Crucial</h4>
                    <p style="font-size: var(--text-xl); font-weight: var(--font-bold); color: var(--texto-oscuro);">
                        Si te doy a elegir entre un contexto donde puedes responder coherentemente 
                        y otro donde NO puedes... ¬øcu√°l preferir√≠as?
                    </p>
                </div>
            </div>

            <!-- EJEMPLO DID√ÅCTICO 1: Analog√≠a simple -->
            <div class="ejemplo-didactico">
                <div class="ejemplo-titulo" style="color: var(--texto-oscuro);">
                    <span>üí°</span>
                    <span>Analog√≠a: El Rompecabezas vs Las Piezas Incompatibles</span>
                </div>
                <div class="ejemplo-contenido">
                    <p style="margin-bottom: var(--space-6); color: var(--texto-oscuro);">
                        Imagina que te ofrecen dos mesas con rompecabezas:
                    </p>

                    <div class="grid-2" style="gap: var(--space-6); margin: var(--space-6) 0;">
                        <div style="background: linear-gradient(135deg, #D1FAE5, #A7F3D0); padding: var(--space-6); border-radius: var(--radius-lg);">
                            <h4 style="font-size: var(--text-xl); font-weight: var(--font-bold); margin-bottom: var(--space-4); color: var(--texto-oscuro);">
                                üß© Mesa A: Coherente
                            </h4>
                            <p style="font-size: var(--text-lg); margin: 0;">
                                Todas las piezas encajan. Puedes armar el rompecabezas completamente. 
                                Tiene sentido y puedes terminarlo.
                            </p>
                        </div>

                        <div style="background: linear-gradient(135deg, #FEE2E2, #FECACA); padding: var(--space-6); border-radius: var(--radius-lg);">
                            <h4 style="font-size: var(--text-xl); font-weight: var(--font-bold); margin-bottom: var(--space-4); color: var(--texto-oscuro);">
                                ‚ùå Mesa B: Incoherente
                            </h4>
                            <p style="font-size: var(--text-lg); margin: 0;">
                                Faltan piezas. Hay piezas de otros rompecabezas mezcladas. 
                                No puedes completarlo. Es frustrante.
                            </p>
                        </div>
                    </div>

                    <p style="margin-top: var(--space-6); font-weight: var(--font-bold); font-size: var(--text-xl); color: var(--acento-cyan);">
                        ¬øCu√°l elegir√≠as? Probablemente la Mesa A, ¬øverdad?
                    </p>

                    <p style="margin-top: var(--space-4);">
                        Eso es exactamente lo que este estudio investiga: <strong>¬øLos humanos prefieren 
                        contextos donde pueden responder coherentemente?</strong>
                    </p>
                </div>
            </div>

            <h3 class="tarjeta-titulo" style="margin-top: var(--space-16);">
                üî¨ El Dise√±o Experimental
            </h3>

            <p class="tarjeta-texto">
                Los investigadores usaron un procedimiento llamado <strong>"concurrent chains"</strong> 
                (cadenas concurrentes). Suena t√©cnico, pero es simple:
            </p>

            <div class="grid-2" style="margin: var(--space-8) 0;">
                <div class="stat-card" style="border-top: 6px solid #3B82F6;">
                    <div class="stat-icono">üü¶</div>
                    <div class="stat-numero" style="color: #3B82F6; font-size: var(--text-4xl);">Puerta<br>Azul</div>
                    <div class="stat-label">Te lleva a trials COHERENTES (puedes resolver con tu aprendizaje)</div>
                </div>

                <div class="stat-card" style="border-top: 6px solid #F59E0B;">
                    <div class="stat-icono">üü®</div>
                    <div class="stat-numero" style="color: #F59E0B; font-size: var(--text-4xl);">Puerta<br>Amarilla</div>
                    <div class="stat-label">Te lleva a trials INCOHERENTES (falta la respuesta "correcta")</div>
                </div>
            </div>

            <p class="tarjeta-texto">
                Primero, los participantes aprendieron relaciones entre est√≠mulos (A-B-C). 
                Luego se les presentaron las dos puertas repetidamente. A veces pod√≠an elegir, 
                a veces eran forzados a una puerta espec√≠fica.
            </p>

            <!-- EJEMPLO DID√ÅCTICO 2: Qu√© significa coherente vs incoherente -->
            <div class="ejemplo-didactico">
                <div class="ejemplo-titulo" style="color: var(--texto-oscuro);">
                    <span>üéØ</span>
                    <span>¬øQu√© Significa "Trial Coherente" vs "Incoherente"?</span>
                </div>
                <div class="ejemplo-contenido">
                    <p style="margin-bottom: var(--space-6); color: var(--texto-oscuro);">
                        Supongamos que aprendiste estas relaciones:
                    </p>

                    <div class="ejemplo-visual" style="margin: var(--space-6) 0; background: linear-gradient(135deg, #E6F7FF, #F0F9FF);">
                        <span class="ejemplo-elemento">A1 = B1 = C1</span>
                        <span class="ejemplo-elemento">A2 = B2 = C2</span>
                        <span class="ejemplo-elemento">A3 = B3 = C3</span>
                    </div>

                    <h4 style="font-size: var(--text-xl); font-weight: var(--font-bold); color: var(--success); margin: var(--space-8) 0 var(--space-4) 0;">
                        ‚úÖ Trial COHERENTE (Puerta Azul):
                    </h4>
                    <div style="background: linear-gradient(135deg, #D1FAE5, #A7F3D0); padding: var(--space-6); border-radius: var(--radius-lg); margin-bottom: var(--space-6);">
                        <p style="font-size: var(--text-lg); margin-bottom: var(--space-4);color: var(--texto-oscuro);">
                            <strong>Muestra:</strong> B1
                        </p>
                        <p style="font-size: var(--text-lg); margin: 0;color: var(--texto-oscuro);">
                            <strong>Opciones:</strong> C1, C2, C3
                        </p>
                        <p style="margin-top: var(--space-4); font-weight: var(--font-bold); color: var(--success);color: var(--texto-oscuro);">
                            ‚Üí Puedes elegir C1 (la respuesta coherente con tu aprendizaje) ‚úì
                        </p>
                    </div>

                    <h4 style="font-size: var(--text-xl); font-weight: var(--font-bold); color: var(--error); margin: var(--space-4) 0;">
                        ‚ùå Trial INCOHERENTE (Puerta Amarilla):
                    </h4>
                    <div style="background: linear-gradient(135deg, #FEE2E2, #FECACA); padding: var(--space-6); border-radius: var(--radius-lg);">
                        <p style="font-size: var(--text-lg); margin-bottom: var(--space-4);">
                            <strong>Muestra:</strong> B1
                        </p>
                        <p style="font-size: var(--text-lg); margin: 0;color: var(--texto-oscuro);">
                            <strong>Opciones:</strong> A2, C2, C3
                        </p>
                        <p style="margin-top: var(--space-4); font-weight: var(--font-bold); color: var(--error);color: var(--texto-oscuro);">
                            ‚Üí ¬°No est√° C1! No puedes responder coherentemente. Es ambiguo y frustrante. ‚úó
                        </p>
                    </div>
                </div>
            </div>

            <div class="caja-dato" style="margin-top: var(--space-10);">
                <div class="caja-icono">üìä</div>
                <div class="caja-contenido">
                    <h4>Datos del Estudio</h4>
                    <p>
                        <strong>76 participantes</strong> completaron el entrenamiento de clase-adquisici√≥n 
                        (A-B-C). De estos, <strong>46 pasaron el test de transitividad</strong> y 
                        <strong>30 no lo pasaron</strong>. Esto ser√° importante m√°s adelante.
                    </p>
                </div>
            </div>
        </div>

        <!-- EXPERIMENTO INTERACTIVO -->
        <div class="experimento-eleccion animate-fade-in-up delay-700" id="experimentoContainer">
            <h3 style="font-size: var(--text-4xl); font-weight: var(--font-black); text-align: center; margin-bottom: var(--space-8); position: relative; z-index: 1;">
                üéÆ Experimenta la Elecci√≥n
            </h3>

            <!-- Progress -->
            <div class="trial-progress">
                <div class="trial-progress-bar">
                    <div class="trial-progress-fill" id="progressFill"></div>
                </div>
                <div class="trial-progress-text" id="progressText">Trial 1 de 10</div>
            </div>

            <!-- Fase indicator -->
            <div class="fase-indicator" id="faseIndicator">
                <div class="fase-titulo">Fase: Elecci√≥n Libre</div>
                <div class="fase-descripcion">Elige la puerta que prefieras</div>
            </div>

            <!-- Puertas -->
            <div class="puertas-container" id="puertasContainer">
                <div class="puerta azul" id="puertaAzul" onclick="elegirPuerta('azul')">
                    <div class="puerta-emoji">üü¶</div>
                    <div class="puerta-label">Puerta Azul</div>
                    <div class="puerta-info">Contexto coherente</div>
                </div>

                <div class="puerta amarilla" id="puertaAmarilla" onclick="elegirPuerta('amarilla')">
                    <div class="puerta-emoji">üü®</div>
                    <div class="puerta-label">Puerta Amarilla</div>
                    <div class="puerta-info">Contexto incoherente</div>
                </div>
            </div>

            <!-- Mini matching (se muestra despu√©s de elegir) -->
            <div class="mini-matching" id="miniMatching" style="display: none;">
                <!-- Se llenar√° din√°micamente -->
            </div>

            <!-- Feedback -->
            <div class="feedback-eleccion" id="feedbackEleccion">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>

        <!-- Resultados -->
        <div class="resultados-preferencia" id="resultadosPreferencia">
            <h3 class="tarjeta-titulo" style="text-align: center; margin-bottom: var(--space-10);">
                üìä Tus Resultados de Preferencia
            </h3>

            <div class="grafico-barras">
                <div class="barra-container">
                    <div class="barra-label">
                        <span style="color: #3B82F6;">üü¶ Puerta Azul (Coherente)</span>
                        <span id="porcentajeAzul">0%</span>
                    </div>
                    <div class="barra-visual">
                        <div class="barra-fill azul" id="barraAzul" style="width: 0%;">
                            <span id="conteoAzul">0</span>
                        </div>
                    </div>
                </div>

                <div class="barra-container">
                    <div class="barra-label">
                        <span style="color: #F59E0B;">üü® Puerta Amarilla (Incoherente)</span>
                        <span id="porcentajeAmarilla">0%</span>
                    </div>
                    <div class="barra-visual">
                        <div class="barra-fill amarilla" id="barraAmarilla" style="width: 0%;">
                            <span id="conteoAmarilla">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="caja-insight" style="margin-top: var(--space-10);">
                <div class="caja-icono">üí°</div>
                <div class="caja-contenido">
                    <h4>Interpretaci√≥n de tus resultados:</h4>
                    <p id="interpretacionResultado"></p>
                </div>
            </div>
        </div>

        <!-- Hallazgos reales -->
        <div class="tarjeta animate-fade-in-up delay-900">
            <h2 class="tarjeta-titulo">Los Hallazgos del Estudio Real</h2>

            <p class="tarjeta-texto">
                Los investigadores realizaron <strong>dos bloques de evaluaci√≥n</strong> donde los participantes 
                pod√≠an elegir libremente entre las dos puertas:
            </p>

            <div class="grid-2" style="margin: var(--space-10) 0;">
                <div class="stat-card">
                    <div class="stat-icono">üìä</div>
                    <div class="stat-numero">39%</div>
                    <div class="stat-label">Pre-Rule: Prefirieron coherencia en el primer bloque</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icono">üìà</div>
                    <div class="stat-numero">45%</div>
                    <div class="stat-label">Post-Rule: Prefirieron coherencia en el segundo bloque</div>
                </div>
            </div>

            <p class="tarjeta-texto">
                Espera... ¬øsolo 39-45%? Eso no parece mucho. Pero aqu√≠ est√° el matiz importante:
            </p>

            <div class="caja-limitacion">
                <div class="caja-icono">‚ö†Ô∏è</div>
                <div class="caja-contenido">
                    <h4>Limitaci√≥n Importante del Dise√±o</h4>
                    <p>
                        Para que la "preferencia por coherencia" sea clara, los participantes necesitaban 
                        <strong>poder discriminar</strong> entre coherente e incoherente. Solo aquellos que 
                        pasaron el test de transitividad pudieron hacer esta discriminaci√≥n completamente.
                    </p>
                </div>
            </div>

            <div class="caja-dato">
                <div class="caja-icono">üéØ</div>
                <div class="caja-contenido">
                    <h4>Hallazgo Clave #3</h4>
                    <p>
                        Hubo una diferencia significativa entre los que eligieron coherencia 
                        vs incoherencia. Cuando los participantes pod√≠an discriminar claramente, 
                        <strong>eligieron coherencia sobre incoherencia</strong> de forma estad√≠sticamente 
                        significativa (p < .001).
                    </p>
                </div>
            </div>
        </div>

        <!-- Navegaci√≥n -->
        <div class="navegacion animate-fade-in delay-1200">
            <button class="btn btn-secundario btn-anterior" onclick="window.location.href='pantalla-3.html'">
                <span>‚Üê</span>
                <span>Anterior</span>
            </button>
            <button class="btn btn-primario btn-siguiente" onclick="window.location.href='pantalla-5.html'">
                <span>Siguiente: El Costo</span>
                <span>‚Üí</span>
            </button>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script src="js/concurrent-chains.js?v=2"></script>
    <script>
        // Configurar pantalla actual
        const nav = new NavigationSystem();
        nav.currentScreen = 4;
        nav.updateProgressBar();
    </script>
</body>
</html>
